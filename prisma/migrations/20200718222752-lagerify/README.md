# Migration `20200718222752-lagerify`

This migration has been generated by ndo@$(hostname) at 7/18/2020, 10:27:52 PM.
You can check out the [state of the schema](./schema.prisma) after the migration.

## Database Steps

```sql
ALTER TABLE `katalog_dev`.`Item` ADD COLUMN `locationId` int  ;

ALTER TABLE `katalog_dev`.`Location` DROP FOREIGN KEY `Location_ibfk_1`,
DROP COLUMN `itemId`;

ALTER TABLE `katalog_dev`.`Item` ADD FOREIGN KEY (`locationId`) REFERENCES `katalog_dev`.`Location`(`id`) ON DELETE SET NULL ON UPDATE CASCADE
```

## Changes

```diff
diff --git schema.prisma schema.prisma
migration 20200718215130-lagerify..20200718222752-lagerify
--- datamodel.dml
+++ datamodel.dml
@@ -3,9 +3,9 @@
 }
 datasource db {
   provider = "mysql"
-  url = "***"
+  url = "***"
 }
 model Item {
   id                   Int      @default(autoincrement()) @id
@@ -43,9 +43,10 @@
   herkunftsart         String?
   wkn_isin             String?
   erfassungsart        String?
 	images							 Image[]  @relation(references: [id])
-	location						 Location
+	location						 Location? @relation(fields: [locationId], references: [id])
+	locationId					 Int?
 }
 model Image {
   id                  Int      @default(autoincrement()) @id
@@ -56,7 +57,5 @@
 model Location {
   id                  Int      @default(autoincrement()) @id
 	description					String
-	item								Item		 @relation(fields: [itemId], references: [id])
-	itemId							Int
 }
```


