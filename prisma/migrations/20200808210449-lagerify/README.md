# Migration `20200808210449-lagerify`

This migration has been generated by ndo@\$(hostname) at 8/8/2020, 11:04:49 PM.
You can check out the [state of the schema](./schema.prisma) after the migration.

## Database Steps

```sql
CREATE TABLE `katalog_dev`.`Company` (
`id` int NOT NULL  AUTO_INCREMENT,
`name` varchar(191) NOT NULL ,
`description` varchar(191)  ,
`email` varchar(191)  ,
`logoUrl` varchar(191)  ,
`note` varchar(191)  ,
PRIMARY KEY (`id`)
) DEFAULT CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci

CREATE TABLE `katalog_dev`.`Warehouse` (
`id` int NOT NULL  AUTO_INCREMENT,
`name` varchar(191) NOT NULL ,
`description` varchar(191)  ,
`street1` varchar(191)  ,
`street2` varchar(191)  ,
`city` varchar(191)  ,
`zip` varchar(191)  ,
`country` varchar(191)  ,
PRIMARY KEY (`id`)
) DEFAULT CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci

ALTER TABLE `katalog_dev`.`Image` MODIFY `title` varchar(191);

ALTER TABLE `katalog_dev`.`Item` ADD COLUMN `note` varchar(191)  ,
ADD COLUMN `companyId` int  ;

ALTER TABLE `katalog_dev`.`Location` ADD COLUMN `warehouseId` int  ,
ADD COLUMN `locationId` int  ;

ALTER TABLE `katalog_dev`.`Status` ALTER COLUMN `name` DROP DEFAULT;

ALTER TABLE `katalog_dev`.`Item` ADD FOREIGN KEY (`companyId`) REFERENCES `katalog_dev`.`Company`(`id`) ON DELETE SET NULL ON UPDATE CASCADE

ALTER TABLE `katalog_dev`.`Location` ADD FOREIGN KEY (`locationId`) REFERENCES `katalog_dev`.`Location`(`id`) ON DELETE SET NULL ON UPDATE CASCADE

ALTER TABLE `katalog_dev`.`Location` ADD FOREIGN KEY (`warehouseId`) REFERENCES `katalog_dev`.`Warehouse`(`id`) ON DELETE SET NULL ON UPDATE CASCADE
```

## Changes

```diff
diff --git schema.prisma schema.prisma
migration 20200808193404-lagerify..20200808210449-lagerify
--- datamodel.dml
+++ datamodel.dml
@@ -1,7 +1,7 @@
 datasource db {
   provider = "mysql"
-  url = "***"
+  url = "***"
 }
 generator client {
   provider = "prisma-client-js"
@@ -52,43 +52,71 @@
   erl_afa_art          String?
   herkunftsart         String?
   wkn_isin             String?
   erfassungsart        String?
+  note                 String?
   images               Image[]   @relation(references: [id])
   status               Status? @relation(fields: [statusId], references: [id])
   statusId             Int?
   location             Location? @relation(fields: [locationId], references: [id])
   locationId           Int?
+  company              Company? @relation(fields: [companyId], references: [id])
+  companyId            Int?
 }
+model Company {
+  id          Int    @default(autoincrement()) @id
+  name        String
+  description String?
+  email       String?
+  logoUrl     String?
+  note        String?
+  item        Item[]
+}
+
 model Image {
   id    Int    @default(autoincrement()) @id
   url   String
-  title String
-  item  Item[] @relation(references: [id])
+  title String?
+  item  Item[]
 }
 model Location {
   id          Int    @default(autoincrement()) @id
+  parent      Location?
   description String
-  item        Item[]
+  warehouseId Int?
+  warehouse   Warehouse? @relation(fields: [warehouseId], references: [id])
+  item        Item[]
 }
+model Warehouse {
+  id          Int    @default(autoincrement()) @id
+  name        String
+  description String?
+  street1     String?
+  street2     String?
+  city        String?
+  zip         String?
+  country     String?
+  location    Location[]
+}
+
 model Status {
   id          Int    @default(autoincrement()) @id
-  name        StatusName? @default(READY_TO_DEPLOY)
+  name        StatusName?
   item        Item[]
 }
 model Shipment {
-  id          Int       @default(autoincrement()) @id
-  direction   Direction? @default(INBOUND)
-  provider    String?
-  trackingNr  String?
-  date_added  DateTime
+  id           Int       @default(autoincrement()) @id
+  direction    Direction? @default(INBOUND)
+  provider     String?
+  trackingNr   String?
+  date_added   DateTime
   date_updated DateTime @default(now())
-  updated_by  String
-  arrived     Boolean   @default(false)
+  updated_by   String
+  arrived      Boolean   @default(false)
 }
 enum Direction {
   INBOUND
```
