# Migration `20200718152440-init`

This migration has been generated by ndo@$(hostname) at 7/18/2020, 3:24:40 PM.
You can check out the [state of the schema](./schema.prisma) after the migration.

## Database Steps

```sql
CREATE TABLE `katalog_dev`.`Item` (
`abgang` datetime(3)   ,`afa_art` varchar(191)   ,`afa_percent` varchar(191)   ,`ahk_date` datetime(3)   ,`ahk_wj_beginn` varchar(191)   ,`ahk_wj_ende` varchar(191)   ,`bestelldatum` datetime(3)   ,`buchw_wj_ende` varchar(191)   ,`buchwert_wj_beginn` varchar(191)   ,`date_added` datetime(3) NOT NULL  ,`date_updated` datetime NOT NULL DEFAULT CURRENT_TIMESTAMP ,`description` varchar(191)   ,`erfassungsart` varchar(191)   ,`erl_afa_art` varchar(191)   ,`herkunftsart` varchar(191)   ,`id` int NOT NULL  AUTO_INCREMENT,`inventarNr` varchar(191)   ,`kontoNr` varchar(191)   ,`lebenslaufakte` boolean   ,`lieferantNr` varchar(191)   ,`n_afa_wj_beginn` varchar(191)   ,`n_afa_wj_ende` varchar(191)   ,`nutzungsdauer` varchar(191)   ,`qty` int   ,`restbeguenstigung` varchar(191)   ,`serialNo` varchar(191)   ,`sonder_abs_art` varchar(191)   ,`sonder_abs_percent` varchar(191)   ,`sonder_abs_verteil` boolean   ,`sonder_abs_wj_beginn` varchar(191)   ,`sonder_abs_wj_ende` varchar(191)   ,`title` varchar(191) NOT NULL  ,`updated_by` varchar(191) NOT NULL  ,`wkn_isin` varchar(191)   ,
    PRIMARY KEY (`id`)
) DEFAULT CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci

CREATE TABLE `katalog_dev`.`Image` (
`id` int NOT NULL  AUTO_INCREMENT,`title` varchar(191) NOT NULL  ,`url` varchar(191) NOT NULL  ,
    PRIMARY KEY (`id`)
) DEFAULT CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci

CREATE TABLE `katalog_dev`.`Location` (
`description` varchar(191) NOT NULL  ,`id` int NOT NULL  AUTO_INCREMENT,`itemId` int NOT NULL ,
    PRIMARY KEY (`id`)
) DEFAULT CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci

CREATE TABLE `katalog_dev`.`_ImageToItem` (
`A` int NOT NULL ,`B` int NOT NULL 
) DEFAULT CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci

CREATE UNIQUE INDEX `Location_itemId` ON `katalog_dev`.`Location`(`itemId`)

CREATE UNIQUE INDEX `_ImageToItem_AB_unique` ON `katalog_dev`.`_ImageToItem`(`A`,`B`)

CREATE  INDEX `_ImageToItem_B_index` ON `katalog_dev`.`_ImageToItem`(`B`)

ALTER TABLE `katalog_dev`.`Location` ADD FOREIGN KEY (`itemId`) REFERENCES `katalog_dev`.`Item`(`id`) ON DELETE CASCADE ON UPDATE CASCADE

ALTER TABLE `katalog_dev`.`_ImageToItem` ADD FOREIGN KEY (`A`) REFERENCES `katalog_dev`.`Image`(`id`) ON DELETE CASCADE ON UPDATE CASCADE

ALTER TABLE `katalog_dev`.`_ImageToItem` ADD FOREIGN KEY (`B`) REFERENCES `katalog_dev`.`Item`(`id`) ON DELETE CASCADE ON UPDATE CASCADE

DROP TABLE `katalog_dev`.`items`;
```

## Changes

```diff
diff --git schema.prisma schema.prisma
migration 20200718123631-init..20200718152440-init
--- datamodel.dml
+++ datamodel.dml
@@ -3,13 +3,15 @@
 }
 datasource db {
   provider = "mysql"
-  url = "***"
+  url = "***"
 }
-model items {
+model Item {
   id                   Int      @default(autoincrement()) @id
+	qty									 Int?
+	title								 String
   description          String?
   serialNo             String?
   inventarNr           String?
   kontoNr              String?
@@ -39,5 +41,21 @@
   erl_afa_art          String?
   herkunftsart         String?
   wkn_isin             String?
   erfassungsart        String?
+	images							 Image[]  @relation(references: [id])
+	location						 Location
 }
+
+model Image {
+  id                  Int      @default(autoincrement()) @id
+	url									String	
+	title								String
+	item								Item[]		 @relation(references: [id])
+}
+
+model Location {
+  id                  Int      @default(autoincrement()) @id
+	description					String
+	item								Item		 @relation(fields: [itemId], references: [id])
+	itemId							Int
+}
```


